/*! freewriting-app v1.0.0 | (c) 2019 Mark Buskbjerg | MIT License | http://github.com/MarkBuskbjerg/freewriting-app */
var render=function(e,t){if("function"==typeof e&&(e.elem=t),(t="string"==typeof t?document.querySelector(t):t)&&"string"==typeof(e="function"==typeof e?e(e.state):e)&&t.innerHTML!==e){if(t.innerHTML=e,"function"==typeof window.CustomEvent){var n=new CustomEvent("render",{bubbles:!0});t.dispatchEvent(n)}return t}},freewriting=(function(){var l={deleteCharacter:function(e){var t=e.split("");return t.pop(),t.join("")},startTimer:function(e,o){var i,d,a=e;setInterval((function(){if(i=parseInt(a/60,10),d=parseInt(a%60,10),i=i<10?"0"+i:i,d=d<10?"0"+d:d,o.textContent=i+":"+d,0===a){var e=document.getElementById("textInput"),t=document.getElementById("placeholder"),n=document.getElementById("wordCount"),r='<div class="tekstr-info-box margin-top"><p><strong>StÃ¦rkt arbejde ðŸ’¥<br/> Her er din tekst:</strong></p><div>'+e.value.replace(/\n\r?/g,"<br />")+"</div></div>";e.style.display="none",t.innerHTML=r,n.innerHTML="<strong>Det er ik' sÃ¥ vigtigt, men du har skrevet "+l.words(e.value).length+" ord</strong>"}--a<0&&(o.textContent="00:00")}),1e3),l.words=function(e){return e.replace(/[-'.]/gi,"").split(/[^a-zA-ZÃ¦Ã¸Ã¥Ã†Ã˜Ã…0-9]/g).filter(Boolean)}},typeWatcher:function(t,n){var r=n;setInterval((function(){var e=t.value;t.addEventListener("keydown",(function(e){8==e.keyCode||37==e.keyCode||38==e.keyCode||39==e.keyCode||40==e.keyCode||46==e.keyCode||e.ctrlKey&&65===e.keyCode||e.ctrlKey&&88===e.keyCode||e.ctrlKey&&67===e.keyCode||(r=n)})),r<=0?t.value=l.deleteCharacter(e):r-=500}),500)}};return l})(),template='<div class="freewriting-app"><header class="freewriting-toolbar" id="toolbar"><div id="toolbarWrapper" class="container container-small text-center"><h4><strong>Tid<br/><span id="timer">10:00 </span></strong></h4><div id="wordCount" class="margin-bottom"><strong></strong></div></div></header><div class="freewriting-text-box container container-small"><textarea autofocus id="textInput" rows="14" placeholder="NedtÃ¦llingen starter, nÃ¥r du begynder at skrive.."></textarea><div id="placeholder"></div></div></div>';render(template,"#app");var initiator=function(e){if("textInput"===e.target.id){document.removeEventListener("keyup",initiator,!1);var t=document.getElementById("textInput"),n=document.getElementById("timer");freewriting.startTimer(600,n),freewriting.typeWatcher(t,2e3),t.onkeydown=function(e){8==e.keyCode?(console.log(e.keyCode),e.preventDefault()):(37==e.keyCode||38==e.keyCode||39==e.keyCode||16==e.keyCode||17==e.keyCode||18==e.keyCode||40==e.keyCode||46==e.keyCode||e.ctrlKey&&65===e.keyCode||e.ctrlKey&&88===e.keyCode||e.ctrlKey&&83===e.keyCode||e.ctrlKey&&67===e.keyCode)&&e.preventDefault()}}};document.addEventListener("keyup",initiator,!1);
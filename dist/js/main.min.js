/*! freewriting-app v0.0.1 | (c) 2019 Mark Buskbjerg | MIT License | http://github.com/MarkBuskbjerg/freewriting-app */
var render=function(e,t){if("function"==typeof e&&(e.elem=t),(t="string"==typeof t?document.querySelector(t):t)&&"string"==typeof(e="function"==typeof e?e(e.state):e)&&t.innerHTML!==e){if(t.innerHTML=e,"function"==typeof window.CustomEvent){var n=new CustomEvent("render",{bubbles:!0});t.dispatchEvent(n)}return t}},freewriting=(function(){var d={deleteCharacter:function(e){var t=e.split("");return t.pop(),t.join("")},startTimer:function(e,r){var a,o,s=e;setInterval((function(){if(a=parseInt(s/60,10),o=parseInt(s%60,10),a=a<10?"0"+a:a,o=o<10?"0"+o:o,r.textContent=a+":"+o,0===s){var e=document.getElementById("textInput"),t=document.getElementById("placeholder"),n=document.getElementById("wordCount"),i='<div class="tekstr-info-box"><p><strong>Godt arbejdet. Her er din tekst:</strong></p><div>'+e.value.replace(/\n\r?/g,"<br />")+"</div></div>";e.style.display="none",t.innerHTML=i,n.innerHTML="Du har skrevet: "+d.words(e.value).length+" ord"}--s<0&&(r.textContent="00:00")}),1e3),d.words=function(e){return e.replace(/[-'.]/gi,"").split(/[^a-zA-ZæøåÆØÅ0-9]/g).filter(Boolean)}},typeWatcher:function(t,n){var i=n;setInterval((function(){var e=t.value;t.addEventListener("keydown",(function(e){8==e.which||37==e.which||38==e.which||39==e.which||40==e.which||46==e.which||(i=n)})),i<=0?t.value=d.deleteCharacter(e):i-=500}),500)}};return d})(),template='<div class="freewriting-toolbar" id="toolbar"><span id="toolbarWrapper">Tid: <span id="timer">10:00 </span><span id="wordCount" style="float: right;"></span><button id="settings" style="float: right;"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><defs><style>.a{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round}</style></defs><path class="a" d="M20.254 13.5H22.5a1 1 0 0 0 1-1v-1a1 1 0 0 0-1-1h-2.247a11.8 11.8 0 0 0-1-2.922l1.586-1.588a1 1 0 0 0 0-1.414l-1.415-1.415a1 1 0 0 0-1.414 0L16.42 4.75a11.769 11.769 0 0 0-2.92-1V1.5a1 1 0 0 0-1-1h-1a1 1 0 0 0-1 1v2.248a11.777 11.777 0 0 0-2.921 1l-1.59-1.587a1 1 0 0 0-1.414 0L3.16 4.576a1 1 0 0 0 0 1.414l1.59 1.589a11.821 11.821 0 0 0-1 2.921H1.5a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1h2.246a11.821 11.821 0 0 0 1 2.921l-1.59 1.59a1 1 0 0 0 0 1.414l1.415 1.414a1 1 0 0 0 1.414 0l1.589-1.589a11.8 11.8 0 0 0 2.926 1.004V22.5a1 1 0 0 0 1 1h1a1 1 0 0 0 1-1v-2.246a11.8 11.8 0 0 0 2.92-1l1.591 1.589a1 1 0 0 0 1.414 0l1.414-1.414a1 1 0 0 0 0-1.414l-1.589-1.59a11.821 11.821 0 0 0 1.004-2.925z"/><circle class="a" cx="12" cy="12" r="4.5"/></svg></button></div></div><div class="settings-toolbar"><div class="settings-item">Writing speed</div></div><div class="freewriting-text-box"><textarea id="textInput" rows="14" placeholder="The counter fires off once you start typing.."></textarea><div id="placeholder"></div></div>';render(template,"#app");var initiator=function(e){if("textInput"===e.target.id){document.removeEventListener("keyup",initiator,!1);var t=document.getElementById("textInput"),n=document.getElementById("timer");freewriting.startTimer(10,n),freewriting.typeWatcher(t,2e3),t.onkeydown=function(e){8!=e.which&&37!=e.which&&38!=e.which&&39!=e.which&&40!=e.which&&46!=e.which||event.preventDefault()}}};document.addEventListener("keyup",initiator,!1),document.addEventListener("click",(function(e){var t=document.body;e.target.matches("#settings")&&(console.log(t),t.classList.toggle("settings-open"))}),!1);